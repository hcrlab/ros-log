
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../ros-topic/ros-topic.html">
<link rel="import" href="../paper-datatable/paper-datatable.html">

<!--
`ros-log`
Adds the robot&#39;s log info to the website

@demo demo/index.html 
-->

<dom-module id="ros-log">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <h2>Hello [[prop1]]</h2>
    <p>Does this even work?</p>
    <ros-websocket ros="{{ros}}" auto ros="{{ros}}" on-connection="handleConnection"></ros-websocket>
    <ros-topic
      auto
      id="topic"
      last-message="{{Log}}"
      on-message="handleMessage"
      topic="/rosout"
      ros="{{ros}}"
      msg-type="rosgraph_msgs/Log"
      ></ros-topic>

      <paper-datatable data="{{data}}" selectable multi-selection>
          <paper-datatable-column header="Title" property="title" sortable editable>
                  <template>
                     <paper-input value="{{value}}">
                  </template>
          </paper-datatable-column>
       </paper-datatable>
                                          

      <div id="log_info_holder">

      </div>
      Message {{Log.msg}} 
 
  </template>

  <script>
    Polymer({

      is: 'ros-log',

      properties: {
        prop1: {
          type: String,
          value: 'ros-log',
        },
      },

    handleConnection: function(){
        console.log("we are connected");
    },

    handleMessage: function(evt){
        console.log(evt.toSource());
       loggerDiv = document.getElementById("log_info_holder");
       loggerDiv.innerHTML += evt.detail.msg;
       loggerDiv.innerHTML += "<p></p>";
    }


    });
  </script>
</dom-module>
